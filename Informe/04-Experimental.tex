%!TEX root = main.tex
\section{Resultados experimentales}
\label{sec:experimental}

Los experimentos se ejecutaron en una máquina con \textbf{1 hilo de CPU} y conjunto de instrucciones \textbf{AVX}. La imagen de entrada utilizada en todas las ejecuciones es de \textbf{256\(\times\)256} píxeles (PGM en escala de grises). Los tiempos de la Tabla~\ref{tab:time} se obtuvieron por \textbf{ejecución directa} de cada binario (cronómetro alrededor del kernel, mismo criterio en las cuatro variantes). Adicionalmente, cada variante se ejecutó bajo \textbf{Intel Advisor} (Survey) para obtener las métricas de vectorización y las capturas de la subsección~\ref{sec:advisor-figs}.

\subsection{Imágenes procesadas}

La Figura~\ref{fig:processed} muestra la imagen de entrada original y el resultado de la detección de bordes producido por la variante explícita (AVX2). La magnitud del gradiente destaca claramente los contornos principales. Salidas adicionales para las variantes auto, guiada y explícita, así como otras imágenes de prueba (p.ej.\ \texttt{guitar.pgm}, \texttt{bee.pgm}), están disponibles en la carpeta \texttt{img/} del repositorio.

\begin{figure}[htb]
\begin{center}
\subfloat[Entrada original (256\(\times\)256)]{\includegraphics[width=0.48\columnwidth]{input}}
\hfill
\subfloat[Resultado detección de bordes (AVX2 explícito)]{\includegraphics[width=0.48\columnwidth]{output_explicit}}
\end{center}
\caption{Ejemplo: imagen original y salida de detección de bordes (variante explícita).}
\label{fig:processed}
\end{figure}

\subsection{Tiempo de ejecución}

La Tabla~\ref{tab:time} recoge el tiempo de ejecución en \textbf{milisegundos (ms)} para la línea base escalar y las tres versiones vectorizadas. Todas las medidas se tomaron por ejecución directa (\texttt{high\_resolution\_clock} alrededor del kernel).

\begin{table}[htb]
\caption{Tiempo de ejecución por variante (ejecución directa, en ms).}
\label{tab:time}
\begin{center}
{\footnotesize
\begin{tabular}{lc}
\toprule
Variante   & Tiempo (ms) \\
\midrule
Escalar   & 0,52 \\
Auto     & 0,34 \\
Guiada (OpenMP SIMD) & 0,27 \\
Explícita (AVX2)      & 0,24 \\
\bottomrule
\end{tabular}
}
\end{center}
\end{table}

La versión escalar tarda 0,52\,ms; la auto, 0,34\,ms; la guiada, 0,27\,ms; la explícita, 0,24\,ms. Las variantes vectorizadas son más rápidas que la escalar; la explícita (AVX2) es la más rápida y mejora respecto de la guiada.

\subsection{Métricas de vectorización de Intel Advisor}

Se utilizó Intel Advisor para recoger datos de Survey en cada compilación. La Tabla~\ref{tab:advisor} resume las métricas de vectorización según el resumen ``Vectorization and Code Insights'': tiempo de CPU en bucles vectorizados e instrucciones AVX.

\begin{table}[htb]
\caption{Métricas de vectorización de Intel Advisor (tiempo en código vectorizado).}
\label{tab:advisor}
\begin{center}
{\footnotesize
\begin{tabular}{lc}
\toprule
Variante   & Vectorización (tiempo en bucle vectorizado) \\
\midrule
Escalar   & 0\% \\
Auto     & 100\% \\
Guiada   & 100\% \\
Explícita & 100\% \\
\bottomrule
\end{tabular}
}
\end{center}
\end{table}

Escalar: 0\% en código vectorizado; auto, guiada y explícita: 100\% en un bucle vectorizado (AVX).

\subsection{Capturas de Intel Advisor}
\label{sec:advisor-figs}

Las Figuras~\ref{fig:advisor-auto}--\ref{fig:advisor-explicit} muestran el resumen de Advisor para cada variante.

\begin{figure}[htb]
\begin{center}
\includegraphics[width=\columnwidth]{auto_general}
\end{center}
\caption{Resumen Intel Advisor: variante auto-vectorizada (\texttt{bdet\_auto}).}
\label{fig:advisor-auto}
\end{figure}

\begin{figure}[htb]
\begin{center}
\includegraphics[width=\columnwidth]{guided_general}
\end{center}
\caption{Resumen Intel Advisor: variante guiada (OpenMP SIMD) (\texttt{bdet\_guided}).}
\label{fig:advisor-guided}
\end{figure}

\begin{figure}[htb]
\begin{center}
\includegraphics[width=\columnwidth]{exp_general}
\end{center}
\caption{Resumen Intel Advisor: variante explícita (AVX2) (\texttt{bdet\_explicit}).}
\label{fig:advisor-explicit}
\end{figure}

\subsection{Aceleración y comparación}

\begin{itemize}
\item Tiempos por ejecución directa (ms): escalar 0,52; auto 0,34; guiada 0,27; explícita 0,24.
\item Aceleración frente a escalar: auto 1,5\(\times\); guiada 1,9\(\times\); explícita 2,2\(\times\).
\item Mejora de la explícita respecto de la guiada: aproximadamente 1,1\(\times\) (0,27\,ms frente a 0,24\,ms).
\end{itemize}

Las métricas de Advisor (Tabla~\ref{tab:advisor}) coinciden con las figuras. Las diferencias de tiempo entre auto, guiada y explícita reflejan el mayor control de la guiada y la explícita frente a la auto-vectorización.
